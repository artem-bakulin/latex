\documentclass{beamer}

\usepackage{cmap}				% To be able to copy-paste russian text from pdf
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{textpos}
\usepackage{ragged2e}
\usepackage{amssymb}
\usepackage{ulem}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{color}
\usepackage{cancel}
\usepackage{multirow}
\pgfplotsset{compat=1.17}
\usetikzlibrary{arrows,snakes,backgrounds,shapes}
\usepgfplotslibrary{groupplots,colorbrewer,dateplot,statistics}
\usepackage{animate}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{setspace}

\usepackage{enumitem}
\setitemize{label=\usebeamerfont*{itemize item}%
  \usebeamercolor[fg]{itemize item}
  \usebeamertemplate{itemize item}}

% remove navigation bar
\setbeamertemplate{navigation symbols}{} 

\usepackage{eurosym}
\renewcommand{\EUR}[1]{\textup{\euro}#1}

\title{Процентные свопы}
\author{Артём Бакулин}
\date{11 марта 2024 г.}

\usetheme{Warsaw}
\usecolortheme{beaver}

% remove navigation bar
\setbeamertemplate{navigation symbols}{}

\setbeamertemplate{page number in head/foot}[totalframenumber] 

\newcommand{\ru}[1]{\begin{otherlanguage}{russian}#1\end{otherlanguage}}
\newcommand{\en}[1]{\begin{otherlanguage}{english}#1\end{otherlanguage}}
\newcommand{\ruen}[2]{#1 (\en{#2})}

\begin{document}



\begin{frame}
\titlepage
\end{frame}



\begin{frame}{Кто этот господин, и почему он здесь?}
\centering
\makebox[\textwidth]{\includegraphics[height=\textheight - 1cm]{shah_of_iran.jpg}}
\end{frame}



\begin{frame}{Банки и преобразование срока}
\justify
Зачем нужны банки? Банки выполняют \alert{преобразование сроков} (\en{maturity transformation}).

\justify
Обычно вкладчики предпочитают краткосрочные депозиты из-за их ликвидности. Заёмщикам чаще всего нужные долгосрочные кредиты.

\justify
Банки устраняют разрыв: они занимают деньги на короткий срок и выдают долгосрочные кредиты. Например, банки привлекают годовые вклады и выдают 30-летние ипотеки.

\justify
Фольклорное правило 3-6-3:
\begin{itemize}
\item Привлекай под 3\%.
\item Выдавай под 6\%.
\item В 3 часа играй в гольф.
\end{itemize}
\end{frame}



\begin{frame}{Премия за риск долгосрочности}
\justify
Банк собирается одолжить кому-то деньги на 10 лет под фиксированную процентную ставку. Какие факторы учтёт банк, когда будет вычислять процентную ставку по кредиту? Стоит ли выдать кредит под 5\% или под 25\%?

\begin{itemize}
\justifying
\item Ожидаемая стоимость краткосрочных депозитов в течение 10 лет.
\item Премия за риск долгосрочности.
\item Ожидаемые потери из-за возможного дефолта (кредитный риск).
\item Премия за кредитный риск.
\item Прибыль банка.
\end{itemize}

\justify
\alert{Премия за риск долгосрочности} (\en{term risk premium}) --- запас срочности на случай, если краткосрочные депозиты в будущем окажутся дороже, чем ожидал банк. Эта премия за риск --- компенсация за то, что банк держит процентный риск и занимается преобразование сроков.
\end{frame}



\begin{frame}{Премия за риск долгосрочности - 2}
\justify
Насколько велика \en{term risk premium}? Эту величину нельзя наблюдать непосредственно, поэтому нам придётся оценить её при помощи моделей и исторических данных.

\justify
Модель Adrian-Crump-Moench (ACM), облигации US Treasury, 1990--2023:

\begin{tabular}{r|r|r}
2 years & 5 years & 10 years \\ \hline
0.30\% & 0.69\% & 1.14\% 
\end{tabular}

\justify
Модель Kim-Wright model, облигации US Treasury, 1990--2023:

\begin{tabular}{r|r|r}
2 years & 5 years & 10 years \\ \hline
0.30\% & 0.43\% & 0.76\%
\end{tabular}

\end{frame}



\begin{frame}{Премия за риск долгосрочности - 3}
\center
\begin{tikzpicture}
\begin{axis}[
  width=\textwidth,
  height=\textheight - 1cm,
  date coordinates in=x,
  date ZERO=1960-01-01,
  xtick={1960-01-01, 1970-01-01, 1980-01-01, 1990-01-01, 2000-01-01, 2010-01-01, 2020-01-01},
  xticklabel={\year},
  xmin=1960-01-01,
  xmax=2025-01-01,
  ymin=-2,
  ymax=5,
  grid=major,
  ylabel={\small{Премия за риск (10Y, модель ACM), \%}},
  xlabel near ticks,
  ylabel near ticks,
  legend pos=north west,
  %legend style={font=\tiny},
  legend cell align={left}
]
\addplot[color=Set1-A, mark=none, thick] table[x=date, y=acmtp10, col sep=comma]{acm_term_premium.csv};
\draw[thick, color=black] (axis cs: 1960-01-01, 0) -- (axis cs: 2030-01-01, 0);
\end{axis}
\end{tikzpicture}

\scriptsize Данные: \en{Federal Reserve Bank of New York}.
\end{frame}



\begin{frame}{Кредиты под плавающую ставку}
\justify
Премия за риск долгосрочности довольно осязаема, особенно во времена высокой неопределённости относительно будущей инфляции и будущих процентных ставок. Можно ли как-то не платить эту премию, то есть занимать деньги дешевле?

\justify
Мы могли бы взять кредит под плавающую процентную ставку, которая была бы привязана к стоимости краткосрочного фондирования банка. Т.е. мы могли бы переложить процентный риск с банка на себя. В среднем платежи по кредиту будут меньше на величину премии за риск.

\justify
Как измерить стоимость краткосрочного фондирования?
\end{frame}



\begin{frame}{London Interbank Offered Rate (LIBOR)}
\justify
В 1969 году шах Ирана (господин на фото) одолжил \$80 миллионов у синдиката лондонских банков.

\justify
Члены синдиката согласились сообщать остальным, по каким ставкам они привлекают краткосрочное фондирование. Среднее арифметическое ставок, которые сообщили банки, округлённое до 1/8 процентного пункта, определяло следующий платёж по кредиту шаха.

\justify
Это арифметическое среднее назвали \alert{\en{London Interbank Offered Rate (LIBOR)}}. 
 
\justify
Ставка LIBOR прекратила существование 1 июля 2023 года. Её заменили другие индикаторы. Тем не менее, именно с неё начались рынок кредитов под плавающую ставку и деривативы на процентные ставки.
\end{frame}



\begin{frame}{European Interbank Offered Rate}
\justify
\alert{EURIBOR} --- индикативная процентная ставка (\en{interest rate benchmark}) по беззалоговым кредитам в евро среди банков Еврозоны. Публикуется \en{European Money Market Institute (EMMI)}.

\justify
По какой ставке сферический крупный банк может занять евро у другого банка или финансовой организации на открытом рынке? 

\justify
\centering
\begin{tabular}{l|r}
Срок (tenor)     & EURIBOR 08.03.2024 \\ \hline
1W (1 неделя)    & $3.880\%$ \\
1M (1 месяц)     & $3.878\%$ \\
3M (3 месяца)    & $3.940\%$ \\
6M (6 месяцев)   & $3.902\%$ \\
12M (12 месяцев) & $3.745\%$ 
\end{tabular}

\justify
*EURIBOR --- ставка без капитализации в конвенции ACT/360.
\end{frame}



\begin{frame}{Вычисление EURIBOR}
\justify
В вычислении EURIBOR участвуют 19 крупных банков Еврозоны и UK. Каждый банк ежедневно отправляет свою ставку по каждому из пяти сроков (от недели до года). Банки обязаны следовать методологии, которая определяет 3 <<уровня>>:

\justify 
1) Cредневзвешенная ставка реальных сделок банка в этот день и на этот срок. Каждая сделка должна быть не меньше 20 млн.

\justify
2) Интерполяция ставок реальных сделок на соседние сроки (например, вычисление 6M из 3M и 12M), либо экстраполяция сделок предыдущих дней на данный срок.

\justify
3) Ставки сделок по похожим инструментам, сделки менее 20 миллионов, котировки деривативов, сделки с нефинансовыми организациями, экспертное суждение. 

\justify
15\% самых больших и 15\% самых маленьких котировок отбрасываются. Арифметическое среднее оставшихся 70\%, округлённое до третьего знака --- EURIBOR.
\end{frame}



\begin{frame}{Вычисление EURIBOR}
\centering
\begin{tikzpicture}
		\draw [->,>=triangle 90] (0, 0) -- (9.5, 0);

		\draw [dashed] (0.5,0) node[anchor=north]{$T-1$} .. controls (1.0, 0.5) and (2.5, 0.5) .. (3,0) node[anchor=north]{$T+1$} node[pos=0.5,anchor=south]{spot lag};

		\draw [->,>=triangle 45] (3,0) .. controls (4, 1) and (7, 1) .. (8,0) node[anchor=north]{$T+1+3M$} node[pos=0.5,anchor=south]{$EURIBOR_{T}$};

		\node[anchor=north] at (1.75, 0) {$T$};
		
		\node[circle, fill, inner sep=1.5pt] at (0.5, 0) {};
		\node[circle, fill, inner sep=1.5pt] at (1.75, 0) {};
		\node[circle, fill, inner sep=1.5pt] at (3.0, 0) {};
		\node[circle, fill, inner sep=1.5pt] at (8.0, 0) {};
	\end{tikzpicture}
	
\justify
T--1 (вчера):  банки заключали сделки и собирали статистику.

T (сегодня): в 11:00 опубликовано среднее арифметическое вчерашних сделок --- EURIBOR на три месяца за дату T.

T+1 (завтра): кредиты, о которых договорились вчера, вступят в силу (банки-заёмщики получат евро).

T+1+3M (через три месяца): кредиты истекут (банки-заёмщики вернут деньги).

\justify
EURIBOR публикуется в дни, когда работает платёжная система Европейского Центробанка TARGET2. Три месяца прибавляются по конвенции \en{modified following business day}.
\end{frame}



\begin{frame}{Euro short-term rate}
\justify
\alert{ESTER} --- индикативная ставка по беззалоговым кредитам сроком на один день (\en{overnight}) среди банков Еврозоны. Публикуется Европейским центральным банком (ЕЦБ).

\justify
\centering
\begin{tabular}{l|r}
Срок   & ESTER 07.03.2024 \\ \hline
1 день & $3.908\%$
\end{tabular}

\justify
В определении ESTER участвует панель из 48-ми банков. Каждый банк в течение дня сообщает ЕЦБ обо всех своих сделках (когда банк берёт кредит на 1 день). ЕЦБ отбрасывает 25\% самых маленьких и 25\% самых больших значений и вычисляет средневзвешенную ставку.

\justify
ESTER --- простая процентная ставка без капитализации в конвенции ACT/360.
\end{frame}



\begin{frame}{Вычисление ESTER}
\justify
\centering
\begin{tikzpicture}
		\draw [->,>=triangle 90] (0, 0) -- (4.0, 0);

		\draw [->, >= triangle 45] (0.5,0) node[anchor=north]{$T$} .. controls (1.0, 0.75) and (2.5, 0.75) .. (3,0) node[anchor=north]{$T+1$} node[pos=0.5,anchor=south]{$ESTER_T$};
\end{tikzpicture}

\justify
T (сегодня): банки берут кредиты (получают евро) и сообщают о сделках в ЕЦБ.

T+1 (завтра): ЕЦБ опубликует среднюю ставку вчерашних сделок --- ESTER за вчера. Кредиты банков истекают (банки отдают евро).

\justify
Как и EURIBOR, ESTER определяется в те дни, когда работает платёжная система TARGET2.
\end{frame}



\newcommand{\plotBenchmarkRate}[2] {
	
	\addplot[
		color = #2,
		mark = none,
		thick
	]
	table[
		x=date,
		y=#1,
		col sep=comma
	]
	{euro_benchmark.csv};
}



\begin{frame}{ESTER и EURIBOR}
\centering
\begin{tikzpicture}
\begin{axis}[
  width=\textwidth,
  height=\textheight - 1cm,
  date coordinates in=x,
  date ZERO=2012-01-01,
  xtick={2012-01-01, 2014-01-01, 2016-01-01, 2018-01-01, 2020-01-01, 2022-01-01, 2024-01-01},
  minor xtick={2013-01-01, 2015-01-01, 2017-01-01, 2019-01-01, 2021-01-01, 2023-01-01},
  ytick={-1, 0, 1, 2, 3, 4},
  minor ytick={-0.5, 0.5, 1.5, 2.5, 3.5},
  xticklabel={\year},
  xmin=2014-01-01,
  xmax=2025-01-01,
  ymin=-1,
  ymax=4.5,
  grid=both,
  yticklabel={\pgfmathprintnumber{\tick}\%},
%  ylabel={\small{Курс USDRUB}},
  xlabel near ticks,
  ylabel near ticks,
  legend entries = {
  	   EURIBOR 6M,
      EURIBOR 3M,
      ESTER
  },
  legend cell align={left},
  legend style={at={(0.03,0.97)},anchor=north west}
]

	\plotBenchmarkRate{6m}{Set1-A}
	\plotBenchmarkRate{3m}{Set1-B}
	\plotBenchmarkRate{ester}{Set1-C}
	
	\draw[thick, color=black] (axis cs: 2012-01-01, 0) -- (axis cs: 2026-01-01, 0);
\end{axis}
\end{tikzpicture}

\scriptsize Данные: Bundesbank.
\end{frame}



\begin{frame}{Фьючерсы на EURIBOR}
\justify
Биржа \en{ICE Futures Europe}\ (бывшая LIFFE) предлагает фьючерсы на трёхмесячный EURIBOR. Например, \alert{FEIM4} --- фьючерс на июнь 2024 года*.

\justify
\centering
\begin{tabular}{r|r}
Покупка & Продажа \\ \hline
96.29 & 96.30
\end{tabular}

\justify
Если мы <<купим>> 10 фьючерсов по 96.30, то:
\begin{itemize}
\justifying
\item Прямо сейчас мы ничего не платим.
\item 17 июня 2024 года** биржа установит финальную цену фьючерса $F = 100 - X$, где 
$X$ --- трёхмесячный EURIBOR, опубликованный в этот день.
\item Мы заработаем $10 \cdot (F - 96.30) \cdot \EUR{2\,500}$, где \EUR{2\,500} --- 
константа из спецификации фьючерса.
\end{itemize}

\justify
*FEI --- код контракта. M --- код месяца (H --- март, M --- июнь, U --- сентябрь, Z --- 
декабрь). 3 --- последняя цифра года.

\justify
**Третья среда месяца минус два рабочих дня.
\end{frame}



\begin{frame}{Фьючерсы на EURIBOR}
\justify
Я заранее знаю, что в июне я разбогатею на \EUR{1\,000\,000}. Я планирую положить деньги на депозит в надёжном банке примерно под EURIBOR, чтобы в сентябре поехать в отпуск. У меня есть \alert{процентный риск} (\en{interest rate risk}): я не знаю, сколько денег у меня будет к сентябрю.

\justify
Решение: купить один фьючерс на EURIBOR по 96.30.

\justify
Допустим, к 17 июня EURIBOR снизится до $2.50\%$.
\begin{itemize}
\justifying
\item Биржа установит финальную цену $100 - 2.50 = 97.50$.
\item Прибыль по фьючерсу $(97.50-96.30)\cdot\EUR{2\,500} = \EUR{3\,000}$.
\item Депозит под EURIBOR $2.50\%$ на три месяца принесёт

$\EUR{1\,000\,000} \cdot 0.025 / 4 = \EUR{6\,250}$.
\item Итого, я заработаю $\EUR{3\,000} + \EUR{6\,250} = \EUR{9\,250}$.
\end{itemize} 

\justify
Я заработал бы столько же, если бы EURIBOR был $3.70\%$: $\EUR{1\,000\,000} \cdot 0.037/4 =\EUR{9\,250}$.
\end{frame}



\begin{frame}{Фьючерсы на EURIBOR}
\justify
Допустим, мы купили июньский фьючерс по 96.30 в марте. В июне мы открыли депозит под
EURIBOR, каким бы он ни был, до сентября. Сколько мы заработаем?

\justify
\centering
\begin{tabular}{r|r|r|r|r}
EURIBOR   & Цена фьючерса & Фьючерс         & Депозит & Итого \\ \hline
$2.50\%$ & 97.50        & $\EUR{3\,000}$ & $\EUR{6\,250}$  & $\EUR{9\,250}$ \\
$3.00\%$ & 97.00        & $\EUR{1\,750}$ & $\EUR{7\,500}$  & $\EUR{9\,250}$ \\
$3.50\%$ & 96.50        & $\EUR{500}$    & $\EUR{8\,750}$  & $\EUR{9\,250}$ \\
$3.70\%$ & 96.30        & $\EUR{0}$       & $\EUR{9\,250}$  & $\EUR{9\,250}$ \\
$4.00\%$ & 96.00        & $-\EUR{750}$    & $\EUR{10\,000}$ & $\EUR{9\,250}$ \\
$4.50\%$ & 95.50        & $-\EUR{2\,000}$ & $\EUR{11\,250}$ & $\EUR{9\,250}$
\end{tabular}

\justify
Покупая фьючерс по цене $100-X$, мы фиксируем ставку будущего депозита на \EUR{1\,000\,000} под EURIBOR. Если мы продаём фьючерс по цене $100-X$, то мы фиксируем будущую выплату по кредиту под плавающую ставку EURIBOR.
\end{frame}



\begin{frame}{Процентный своп}
\justify
\alert{Процентный своп} (\en{interest rate swap}) --- дериватив, в котором две стороны 
обмениваются процентными платежами по фиксированной ставке и по плавающей (референсной) 
ставке. 

\justify
Параметры свопа:
\begin{itemize}
\justifying
\item Срок (\en{term, maturity}) --- дата последнего платежа. Например, 1 год.
\item Размер (\en{notional amount, principal amount}) --- сумма, с которой платятся проценты. Например, \EUR{1} миллион.
\item Купон (\en{coupon}) или ставка свопа (\en{swap rate}) --- фиксированная ставка, которую платит одна сторона. Например, $3.0\%$ годовых.
\item Референсная ставка (\en{reference rate}) --- тип плавающей ставки, которую платит вторая сторона. Например, 3M EURIBOR.
\end{itemize}

\justify
Купить своп --- согласиться получать плавающую ставку и платить за неё фиксированную ставку. Продать своп --- согласиться платить плавающую ставку и получать за неё фиксированную.
\end{frame}



\begin{frame}{Процентный своп}
\centering
\begin{tikzpicture}[thick, scale=0.75]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -7);
		\draw (9.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (9.5, -7);

		\draw [dashed,->,>=triangle 90] (0, -1) node[label=left:{$T_0$}]{} -- (4.5, -1) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000}$};

		\draw [dashed,->,>=triangle 90] (9.5, -1) node[label=right:{\text{фиксинг $E_1$}}]{} -- (5, -1) node[pos=0.5,anchor=south]{\euro 1\,000\,000};

		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{$T_1 = \text{3M}$}]{} -- (4.5, -2.5) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot \dfrac{3.0\%}{4}$};

		\draw [snake=snake,->,>=triangle 90] (9.5, -2.5)  node[label=right:{\text{фиксинг $E_2$}}]{} -- (5, -2.5) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_1}{4}$};

		\draw [->,>=triangle 90] (0, -4) node[label=left:{$T_2 = \text{6M}$}]{} -- (4.5, -4) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot \dfrac{3.0\%}{4}$};

		\draw [snake=snake,->,>=triangle 90] (9.5, -4)  node[label=right:{\text{фиксинг $E_3$}}]{} -- (5, -4) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_2}{4}$};

		\draw [->,>=triangle 90] (0, -5.5) node[label=left:{$T_3 = \text{9M}$}]{} -- (4.5, -5.5) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot \dfrac{3.0\%}{4}$};

		\draw [snake=snake,->,>=triangle 90] (9.5, -5.5)  node[label=right:{\text{фиксинг $E_4$}}]{} -- (5, -5.5) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_3}{4}$};
		\draw [->,>=triangle 90] (0, -7) node[label=left:{$T_4 = \text{12M}$}]{} -- (4.5, -7) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot \dfrac{3.0\%}{4}$};

		\draw [snake=snake,->,>=triangle 90] (9.5, -7) -- (5, -7) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_4}{4}$};
\end{tikzpicture}
\end{frame}



\begin{frame}{Управление процентным риском}
\justify
Процентный своп позволяет превратить кредит под плавающую ставку (например, EURIBOR+1\%) в кредит под фиксированную ставку (например, 4.0\%) и наоборот.

\justify
\centering
	\begin{tikzpicture}[thick]

		\tikzstyle{company}=[rectangle,draw,rounded corners,minimum height=1.2cm,minimum width=3cm];
		\tikzstyle{fixed}=[->,>=triangle 90];
		\tikzstyle{floating}=[snake=snake,->,>=triangle 90];

		\node (A) at (0, 0) [company] {Компания A};
		\node (B) at (7, 0) [company] {Компания B};
		\node (Deutsche) at (0, -3) [company] {Deutsche};
		\node (Citi) at (7, -3) [company] {Citi};

		\draw [fixed] ([yshift=0.2cm]A.east) -- ([yshift=0.2cm]B.west) node[pos=0.5,anchor=south]{3.0\%};

		\draw [floating] ([yshift=-0.2cm]B.west) -- ([yshift=-0.2cm]A.east) node[pos=0.5,anchor=north]{EURIBOR};

		\draw [floating] (A.south) -- (Deutsche.north) node[pos=0.5,anchor=west]{EURIBOR + 1\%};

		\draw [fixed] (B.south) -- (Citi.north) node[pos=0.5,anchor=east]{$3.5\%$};
	\end{tikzpicture}

\justify
Итого: A платит 4.0\%, B платит EURIBOR + 0.5\%.
\end{frame}



\begin{frame}{Текущая стоимость}
\justify
\alert{Текущая стоимость} (\en{present value}) выплаты в $N$ рублей через $T$ лет --- сумма, 
которую участники рынка готовы заплатить сегодня за право получить эту выплату.

\justify
Сколько рублей вы готовы заплатить сегодня (\en{PV}) за право получить 1\,120\,000 (\en{future value, FV}) рублей через год? Предположим, что на рынке есть идеальный безрисковый депозит под 12\% с простой капитализацией.

\begin{align*}
PV = \frac{FV}{1+rT} = \frac{1\,120\,000}{1 + 12\%} = 1\,000\,000
\end{align*}

\justify
Никто не захочет платить больше, чем 1\,000\,000 сегодняшних рублей за 1\,120\,000 будущих рублей, потому что выгоднее будет вложить 1\,000\,000 под 12\% на год. Никто не захочет продавать 1\,120\,000 будущих рублей дешевле, чем за 1\,000\,000 сегодняшних, потому что выгоднее будет взять в кредит 1\,000\,000 под 12\% и погасить его через год.
\end{frame}



\begin{frame}{Коэффициент дисконтирования}
\justify
\alert{Коэффициент дисконтирования} (\en{discount factor}) для будущей даты $T$ --- текущая стоимость права получить 1 единицу валюты в день $T$. Другая формулировка: сколько рублей нужно иметь сегодня, чтобы сделать из них 1 рубль к моменту $T$?

\justify
Ответ зависит от того, какая безрисковая ставка $r$ нам доступна:
\begin{align*}
\delta_T &= \frac{1}{1 + rT} \quad \text{(простые проценты)} \\
\delta_T &= \frac{1}{e^{r^*T}} = e^{-r^*T} \quad \text{(непрерывные проценты)}
\end{align*}

\justify
Например, если безрисковая процентная ставка равна 12\%, то коэффициент дисконтирования на 1 год равен
\begin{align*}
\delta_1 = \frac{1}{1.12} \approx 0.8929
\end{align*}
\end{frame}



\begin{frame}{Честная цена свопа}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -3);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -3);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{$T_1$}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$N \cdot x \cdot t_1$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$N \cdot E_1 \cdot t_1$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{$T_2$}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$N \cdot x \cdot t_2$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$N \cdot E_2 \cdot t_2$};

		\draw (0, -3.5) -- (0, -4.5);				
		\draw (7.5, -3.5) -- (7.5, -4.5);

		\draw [->,>=triangle 90] (0, -4) node[label=left:{$T_i$}]{} -- (3.5, -4) node[pos=0.5,anchor=south]{$N \cdot x \cdot t_i$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -4) -- (4, -4) node[pos=0.5,anchor=south] {$N \cdot E_i \cdot t_i$};
\end{tikzpicture}

\justify
$N$ --- notional, или размер свопа.

$T_i$ --- количество лет до $i$-го платежа.

$E_i$ --- ожидаемые значения EURIBOR.

$t_i = T_i - T_{i-1}$ --- количество лет, на которое начисляется EURIBOR.

$\delta_i$ --- коэффициент дисконтирования для момент времени $T_i$.

\justify
Какой должна быть честная цена свопа (купон) $x$?
\end{frame}



\begin{frame}{Честная цена свопа - 2}
\justify
Текущие стоимости (PV) платежей компаний A и B должны совпадать. В противном случае одна из компаний подарила другой деньги просто так.

\justify
\begin{align*}
\sum\limits_{i=1}^{n} N \cdot x \cdot t_i \cdot \delta_i 
= \sum\limits_{i=1}^{n} N \cdot E_i \cdot t_i \cdot \delta_i
\end{align*}
\begin{align*}
x = \frac{\sum\limits_{i=1}^{n} E_i t_i \delta_i}{\sum\limits_{i=1}^{n} t_i \delta_i}
\end{align*}

\justify
Если кто-то сообщит нам будущие значения EURIBOR $E_i$ и коэффициенты дисконтирования $\delta_i$, то мы сможем посчитать цену любого процентного свопа.
\end{frame}



\begin{frame}{Честная цена свопа - 3}
\justify
Предположим, что ставка дисконтирования равна нулю, поэтому все коэффициенты дисконтирования близки к 1, т.е. $\delta_i \approx1$.

\justify
Также будем игнорировать особенности календаря и будем считать, что все интервалы между платежами равны. Например, $t_i = t = 1/4$ для свопа с ежеквартальными платежами.

\begin{align*}
x = \frac{\sum\limits_{i=1}^{n} E_i t_i \delta_i}{\sum\limits_{i=1}^{n} t_i \delta_i}
\approx
\frac{\sum\limits_{i=1}^{n} E_i t}{\sum\limits_{i=1}^{n} t}
=
\frac{\sum\limits_{i=1}^{n} E_i}{n}
\end{align*}

\justify
Вывод от Капитана Очевидность: цена свопа --- среднее будущих значений EURIBOR за время жизни свопа.
\end{frame}



\begin{frame}{Вычисление ожидаемых значений EURIBOR}
\justify
Предположим, что рыночный терминал Reuters или Bloomberg показывает нам следующую информацию о рынке свопов на EURIBOR 3M.

\justify
\centering
\begin{tabular}{l|r}
Инструмент        & Цена (купон) \\ \hline
Последний фиксинг & 3.00\% \\
Своп 6M           & 3.40\% \\
Своп 9M           & 3.60\% \\
Своп 1Y           & 3.70\% \\
Своп 18M          & 3.75\% \\
Своп 2Y           & 3.60\%
\end{tabular}

\end{frame}



\begin{frame}{Вычисление ожидаемых значений EURIBOR - 2}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -2.5);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -2.5);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{3M}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$3.40\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$3.00\%$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{6M}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$3.40\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$E_2$};
\end{tikzpicture}

\justify
Мы знаем цену свопа на 6 месяцев ($3.40\%$). Также мы знаем и текущее значение EURIBOR ($3.00\%$), которое будет использовано для первого плавающего платежа. Отсюда мы можем вычислить <<ожидаемое>> значение $E_2$.
\begin{align*}
3.40\% + 3.40\% &= 3.00\% + E_2 \Rightarrow \\
E_2 &= 3.80\%
\end{align*}

\end{frame}



\begin{frame}{Отступление об <<ожиданиях>> рынка}
\justify
Можем ли мы быть уверены, что <<ожидаемое>> рынком значение $E_2=3.80\%$ --- правильное? Нет не можем. Скорее всего, в реальности значение EURIBOR будет другим. В среднем, процентные ставки оказываются чуть ниже, чем <<ожидаемые>> ставки, которые можно было вычислить из котировок свопов.

\justify
<<Ожидаемая>> рынком ставка --- это всего-навсего ставка, которая соответствует текущим ценам свопов. Это два эквивалентных взгляда на одно и то же явление:

1) Текущий фиксинг $3.00\%$, своп на 6 месяцев $3.40\%$.

2) Текущий фиксинг $3.00\%$, ставка через 3 месяца $3.80\%$.
\end{frame}



\begin{frame}{Отступление об <<ожиданиях>> рынка - 2}
\justify
Не так важно, ошибается ли рынок или нет, когда оценивает будущее значение $E_2$. Важно, что в нашем распоряжении есть ликвидные инструменты, которые позволяют захеджировать процентный риск и избавиться от всей неопределённости, связанной с $E_2$.

\justify
Допустим, мы должны будем заплатить кому-то за кредит по ставке $E_2$. Купим процентный своп на 6 месяцев.

\centering
\begin{tabular}{l|r|r|r}
Дата    & \multicolumn{2}{c|}{Своп} & Кредит \\ \hline
Сегодня &          0  &  0            & 0 \\
3M      & $-3.40\%$  &  $+3.00\%$   & 0 \\
6M      & $-3.40\%$  &  $+E_2$       & $-E_2$
\end{tabular}

\justify
Всего по всем платежам мы заплатим $3.80\%$ вне зависимости от будущего значения EURIBOR $E_2$. Процентный своп позволяет нам жить в мире, в котором EURIBOR $E_2$ всегда оказывается равен $3.80\%$.
\end{frame}



\begin{frame}{Вычисление ожидаемых значений EURIBOR - 3}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -4);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -4);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{3M}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$3.60\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$3.00\%$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{6M}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$3.60\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$3.80\%$};
		
		\draw [->,>=triangle 90] (0, -4) node[label=left:{9M}]{} -- (3.5, -4) node[pos=0.5,anchor=south]{$3.60\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -4) -- (4, -4) node[pos=0.5,anchor=south] {$E_3$};
\end{tikzpicture}

\justify
Знание цены свопа на 9 месяцев (3.60\%) и двух первых значений EURIBOR (3.00\% и 3.80\%) позволяет вычислить <<ожидаемое>> значение $E_3$.
\begin{align*}
3.60\% + 3.60\% + 3.60\% &= 3.0\% + 3.80\% + E_3 \Rightarrow \\
E_3 &= 4.00\%
\end{align*}
\end{frame}



\begin{frame}{Вычисление ожидаемых значений EURIBOR - 4}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -5.5);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -5.5);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{3M}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$3.70\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$3.00\%$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{6M}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$3.70\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$3.80\%$};
		
		\draw [->,>=triangle 90] (0, -4) node[label=left:{9M}]{} -- (3.5, -4) node[pos=0.5,anchor=south]{$3.70\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -4) -- (4, -4) node[pos=0.5,anchor=south] {$4.00\%$};
		
		\draw [->,>=triangle 90] (0, -5.5) node[label=left:{12M}]{} -- (3.5, -5.5) node[pos=0.5,anchor=south]{$3.70\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -5.5) -- (4, -5.5) node[pos=0.5,anchor=south] {$E_4$};
\end{tikzpicture}

\justify
Знание цены свопа на 12 месяцев (3.70\%) и трёх первых значений EURIBOR (3.00\%, 3.80\% и 4.00\%) позволяет вычислить <<ожидаемое>> значение $E_4$.
\begin{align*}
3.70\%+3.70\%+3.70\%+3.70\% &= 3.00\% + 3.80\% + 4.00\% + E_4 \Rightarrow \\
E_4 &= 4.00\%
\end{align*}
\end{frame}



\begin{frame}{Вычисление ожидаемых значений EURIBOR - 5}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -8.5);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -8.5);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{3M}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$3.75\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$3.00\%$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{6M}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$3.75\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$3.80\%$};
		
		\draw [->,>=triangle 90] (0, -4) node[label=left:{9M}]{} -- (3.5, -4) node[pos=0.5,anchor=south]{$3.75\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -4) -- (4, -4) node[pos=0.5,anchor=south] {$4.00\%$};
		
		\draw [->,>=triangle 90] (0, -5.5) node[label=left:{12M}]{} -- (3.5, -5.5) node[pos=0.5,anchor=south]{$3.75\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -5.5) -- (4, -5.5) node[pos=0.5,anchor=south] {$4.00\%$};
		
				\draw [->,>=triangle 90] (0, -7) node[label=left:{15M}]{} -- (3.5, -7) node[pos=0.5,anchor=south]{$3.75\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -7) -- (4, -7) node[pos=0.5,anchor=south] {$E_5$};
		
				\draw [->,>=triangle 90] (0, -8.5) node[label=left:{18M}]{} -- (3.5, -8.5) node[pos=0.5,anchor=south]{$3.75\%$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -8.5) -- (4, -8.5) node[pos=0.5,anchor=south] {$E_6$};
\end{tikzpicture}
\end{frame}



\begin{frame}{Вычисление ожидаемых значений EURIBOR - 6}
\justify
У нас нет котировки свопа на 15 месяцев, есть только своп на 18 месяцев. Это даёт нам одно уравнение и два неизвестных значения EURIBOR $E_5$ и $E_6$.
\begin{align*}
3.00\%+3.80\%+4.00\%+4.00\%+E_5+E_6 = 6\cdot3.75\%
\end{align*}

\justify
Предположим, что будущие ставки изменяются линейно: на сколько $E_5$ больше $E_4$, на столько же $E_6$ больше, чем $E_5$.
\begin{align*}
\begin{cases}
3.00\%+3.80\%+4.00\%+4.00\%+E_5+E_6 = 6\cdot3.75\% \\
E_5 - 4.00\% = E_6 - E_5
\end{cases}
\end{align*}

С учётом предположения о линейной интерполяции:
\begin{align*}
\begin{cases}
E_5 = 3.90\% \\
E_6 = 3.80\%
\end{cases}
\end{align*}
\end{frame}



\begin{frame}{Добавляем дисконтирование}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -2.5);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -2.5);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{3M}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$S_{6M}t_1\alert{\delta_1}$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$E_1t_1\alert{\delta_1}$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{6M}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$S_{6M}t_2\alert{\delta_2}$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$\alert{E_2}t_2\alert{\delta_2}$};
\end{tikzpicture}

\justify
Вернёмся в реальность и добавим в модель коэффициенты дисконтирования на 3 и 6 месяцев $\delta_1$ и $\delta_2$. Обычно они не известны заранее, поэтому у нас получается одно уравнение с тремя неизвестными.
\begin{align*}
S_{6M}t_1\alert{\delta_1} + S_{6M}t_2\alert{\delta_2} = E_1t_1\delta_1 + \alert{E_2}t_2\alert{\delta_2}
\end{align*}

\justify
Как быть?
\end{frame}



\begin{frame}{Безрисковая инвестиция под EURIBOR}
\justify
Предположим, что ставки трёхмесячного EURIBOR являются безрисковыми. Это разумное предположение, потому что о проблемах у банка обычно становится известно заранее.

\justify
Мы можем построить цепочку из безрисковых депозитов под EURIBOR:

1) Выбрать надёжный банк и вложить деньги на три месяца под EURIBOR.

2) Подождать три месяца.

3) Снять деньги и вернуться к пункту 1.

\justify
\centering
\begin{tikzpicture}
		\draw [->,>=triangle 90] (0.5, 0) -- (11, 0);

		\draw [->,>=triangle 45] (0.5,0) node[anchor=north east]{0} .. controls (1, 0.5) and (2, 0.5) .. (2.5,0) node[anchor=north]{$T_1$} node[pos=0.5,anchor=south]{$E_1$};

		\draw [->,>=triangle 45] (2.5,0) .. controls (3, 0.5) and (4, 0.5) .. (4.5,0) node[anchor=north]{$T_2$} node[pos=0.5,anchor=south]{$E_2$};

		\draw [->,>=triangle 45] (4.5,0) .. controls (5, 0.5) and (6, 0.5) .. (6.5,0) node[anchor=north]{$T_3$} node[pos=0.5,anchor=south]{$E_3$};
		
		\draw [dashed] (6.5,0) .. controls (7, 0.5) and (8, 0.5) .. (8.5,0);
		
		\draw [->,>=triangle 45] (8.5,0) node[anchor=north]{$T_{n-1}$} .. controls (9, 0.5) and (10, 0.5) .. (10.5,0) node[anchor=north]{$T_n$} node[pos=0.5,anchor=south]{$E_n$};
	\end{tikzpicture}
%\justify
%Каждый раз на шаге 1 мы можем (но не обязаны) выбирать новый банк, если кредитный рейтинг предыдущего банка нам больше не нравится.
\end{frame}



\begin{frame}{Безрисковая инвестиция под EURIBOR - 2}
\centering
\begin{tikzpicture}
		\draw [->,>=triangle 90] (0.5, 0) -- (11, 0);

		\draw [->,>=triangle 45] (0.5,0) node[anchor=north]{$T_0$} .. controls (1, 0.5) and (2, 0.5) .. (2.5,0) node[anchor=north]{$T_1$} node[pos=0.5,anchor=south]{$E_1$};

		\draw [->,>=triangle 45] (2.5,0) .. controls (3, 0.5) and (4, 0.5) .. (4.5,0) node[anchor=north]{$T_2$} node[pos=0.5,anchor=south]{$E_2$};

		\draw [->,>=triangle 45] (4.5,0) .. controls (5, 0.5) and (6, 0.5) .. (6.5,0) node[anchor=north]{$T_3$} node[pos=0.5,anchor=south]{$E_3$};
		
		\draw [dashed] (6.5,0) .. controls (7, 0.5) and (8, 0.5) .. (8.5,0);
		
		\draw [->,>=triangle 45] (8.5,0) node[anchor=north]{$T_{n-1}$} .. controls (9, 0.5) and (10, 0.5) .. (10.5,0) node[anchor=north]{$T_n$} node[pos=0.5,anchor=south]{$E_n$};
		
		\node [anchor=north] at (1.5, 0) {$t_1$};
		\node [anchor=north] at (3.5, 0) {$t_2$};
		\node [anchor=north] at (5.5, 0) {$t_3$};
		\node [anchor=north] at (9.5, 0) {$t_n$};
	\end{tikzpicture}
	
\justify
Если мы вложили $N_0$ евро в цепочку депозитов, то сколько евро будет на счету к моменту времени $T_n$?
\begin{align*}
N_n = N_0(1 + E_1t_1)(1 + E_2t_2) ... (1 + E_nt_n)
\end{align*}

\justify
Чему равен коэффициент дисконтирования на дату окончания цепочки $T_n$?
\begin{align*}
\delta_n = \frac{1}{(1 + E_1t_1)(1 + E_2t_2) ... (1 + E_nt_n)}
\end{align*}
\end{frame}



\begin{frame}{Добавляем дисконтирование - 2}
\centering
\begin{tikzpicture}[thick, scale=0.7]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -2.5);
		\draw (7.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (7.5, -2.5);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{3M}]{} -- (3.5, -1) node[pos=0.5,anchor=south]{$S_{6M}t_1\alert{\delta_1}$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -1)  -- (4, -1) node[pos=0.5,anchor=south] {$E_1t_1\alert{\delta_1}$};
		
		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{6M}]{} -- (3.5, -2.5) node[pos=0.5,anchor=south]{$S_{6M}t_2\alert{\delta_2}$};

		\draw [snake=snake,->,>=triangle 90] (7.5, -2.5) -- (4, -2.5) node[pos=0.5,anchor=south] {$\alert{E_2}t_2\alert{\delta_2}$};
\end{tikzpicture}

\justify
Мы только что связали будущие значения EURIBOR $E_i$ с коэффициентами дисконтирования $\delta_i$. Теперь у нас столько уже уравнений, сколько и неизвестных.
\begin{align*}
\begin{cases}
S_{6M}t_1\alert{\delta_1} + S_{6M}t_2\alert{\delta_2} = E_1t_1\delta_1 + \alert{E_2}t_2\alert{\delta_2} \\
\alert{\delta_1} = \dfrac{1}{1+E_1t_1} \\
\alert{\delta_2} = \dfrac{1}{(1+E_1t_1)(1+\alert{E_2}t_2)}
\end{cases}
\Rightarrow E_2 \approx 3.804\%
\end{align*}
\end{frame}



\begin{frame}{Метод bootstrap}
\justify
Если рассматривать EURIBOR как безрисковую ставку, то удобно представлять кривую будущих значений как совокупность коэффициентов дисконтирования $\delta_i$. Будущее значение EURIBOR для депозита, который начнётся через $T_1$ лет и закончится через $T_2 = T_1 + 0.25$ лет равно
\begin{align*}
E(T_1, T_2) = \frac{\dfrac{\delta_{T_1}}{\delta_{T_2}} - 1}{T_2 - T_1}
\end{align*}

\justify
Алгоритм пошагового расчёта коэффициентов дисконтирования и будущих ставок из котировок рыночных инструментов называется \alert{\en{bootstrap}}. Он реализован во многих финансовых библиотеках, таких как QuantLib и tf-quant-finance. 
\end{frame}



\begin{frame}{Пример: bootstrap}
\justify
Рассмотрим котировки свопов на трёхмесячный EURIBOR: 

\justify
\centering
\begin{tabular}{l|r}
Срок & Купон \\ \hline
3M   & 3.94\%  \\
1Y   & 3.53\%  \\
2Y   & 3.00\%  \\
3Y   & 2.75\%  \\
4Y   & 2.62\%  \\
5Y   & 2.57\%  \\
7Y   & 2.52\%  \\
10Y   & 2.54\%  
\end{tabular}
\end{frame}



\begin{frame}{Пример: интерполяция}
\begin{tikzpicture}
\begin{axis}[
  width=\textwidth,
  height=\textheight - 1cm,
  date coordinates in=x,
  date ZERO=2012-01-01,
  xtick={2023-01-01, 2024-01-01, 2025-01-01, 2026-01-01, 2027-01-01, 2028-01-01, 2029-01-01, 2030-01-01},
  %minor xtick={2013-01-01, 2015-01-01, 2017-01-01, 2019-01-01, 2021-01-01},
  %ytick={-0.5, 0, 0.5, 1.0, 1.5},
  %minor ytick={-0.75, -0.25, 0.25, 0.75, 1.25},
  xticklabel={\year},
  xmin=2024-03-08,
  xmax=2030-01-01,
  ymin=200,
  ymax=400,
  grid=major,
  ylabel={\small{EURIBOR, б.п.}},
  xlabel near ticks,
  ylabel near ticks
]

	\addplot[
		color = Set1-A,
		mark = none,
		very thick
	]
	table[
		x=date,
		y=linear,
		col sep=comma
	]
	{euribor_bootstrap.csv};
		
	\draw[thick, color=black] (axis cs: 2012-01-01, 0) -- (axis cs: 2030-01-01, 0);
\end{axis}
\end{tikzpicture}
\end{frame}



\begin{frame}{Пример: нестандартный своп}
\justify
Рассмотрим нестандартный своп, который начнётся через 1.5 года и закончится чрез 6.5 лет.

\justify
Поскольку мы знаем будущие значения EURIBOR и коэффициентов дисконтирования, мы можем 
подобрать такой купон, что PV свопа было равно 0.

\justify
\centering
\begin{tabular}{l|l|l}
& We Pay & We Receive \\ \hline
Effective date & 15.09.2025 & 15.09.2025 \\ 
Maturity date  & 15.09.2030 & 15.09.2030 \\
Notional       & \EUR{1\,000\,000} & \EUR{1\,000\,000} \\
Frquency       & Semi-annually     & Quarterly \\
Rate           & \alert{2.2829\%}          & EURIBOR-3M   \\
Basis          & ACT/360           & ACT/360
\end{tabular}
\end{frame}



\begin{frame}{Пример: риск}
\justify
PV01 (present value of 1 bp) или DV01 (dollar value of 1 bp): на сколько изменится
PV, если процентная ставка изменится на 1 базисный пункт.

\justify
\centering
\begin{tabular}{l|r|r}
Срок  & PV01 & Размер хэджа \\ \hline
1Y   & $-82$  евро/б.п. & $+\EUR{848\,000}$ \\
2Y    & $-80$ евро/б.п. & $+\EUR{422\,000}$ \\
3Y    & $+8$ евро/б.п. & $-\EUR{30\,000}$ \\
4Y    & $-28$  евро/б.п. & $+\EUR{75\,000}$ \\
5Y    & $+144$ евро/б.п. & $-\EUR{313\,000}$ \\ 
7Y    & $+494$ евро/б.п. & $-\EUR{783\,000}$ \\ 
10Y    & $-28$ евро/б.п. & $+\EUR{32\,000}$ \\ \hline
Итого & $+429$ евро/б.п. & $+\EUR{252\,000}$
\end{tabular}

\justify
Правило большого пальца для PV01: размер * срок / 10\,000.
\end{frame}



\begin{frame}{Кругом обман}
\centering
\makebox[\textwidth]{\includegraphics[width=\textwidth]{we_need_to_go_deeper.jpg}}
\end{frame}



\begin{frame}{Дисконтирование по EURIBOR}
\justify
Мы использовали трёхмесячный EURIBOR для дисконтирования будущих платежей. Но есть же, например, шестимесячный EURIBOR и свопы на шестимесячный EURIBOR. По аналогии, чтобы забутсрапить кривую шестимесячного EURIBOR мы должны были бы дисконтировать платежи по этой ставке (притвориться, что строим цепочку из шестимесячных депозитов).

\justify
Ещё хуже: есть базисные свопы (\en{tenor basis swap}), в которых одна сторона платит шестимесячный EURIBOR, а другая --- трёхмесячный с доплатой (базисом). По какой ставке  дисконтировать платежи в этих свопах? Хотелось бы, чтобы коэффициент дисконтирования на дату $T$ не зависел от того, в какой задаче мы его используем.

\justify
Кроме того, в определении EURIBOR участвуют банки с кредитным рейтингом BBB. Действительно ли это безрисковая ставка?
\end{frame}



\begin{frame}{Базисный процентный своп}
\justify
\begin{tikzpicture}[thick, scale=0.75]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -7);
		\draw (10, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (10, -7);

		\draw [dashed,->,>=triangle 90] (0, -1) node[label=left:{$T_0$}]{} -- (4, -1) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000}$};

		\draw [dashed,->,>=triangle 90] (10, -1) node[label=right:{\setlength\tabcolsep{1pt}\begin{tabular}{l}фиксинг\\$E_1^{3M}$ и $E_1^{6M}$\end{tabular}}]{} -- (4.5, -1) node[pos=0.5,anchor=south]{\euro 1\,000\,000};

		\node [label=left:{$3M$}] at (0, -2.5) {};

		\draw [snake=snake,->,>=triangle 90] (10, -2.5)  node[label=right:{\text{фиксинг $E_2^{3M}$}}]{} -- (4.5, -2.5) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_1^{3M} + 0.1\%}{4}$};

		\draw [snake=snake,->,>=triangle 90] (0, -4) node[label=left:{$6M$}]{} -- (4, -4) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot \dfrac{E_1^{6M}}{2}$};

		\draw [snake=snake,->,>=triangle 90] (10, -4)  node[label=right:{\setlength\tabcolsep{1pt}\begin{tabular}{l}фиксинг\\$E_3^{3M}$ и $E_2^{6M}$\end{tabular}}]{} -- (4.5, -4) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_2^{3M} + 0.1\%}{4}$};

		\node [label=left:{$9M$}] at (0, -5.5) {};
		
		\draw [snake=snake,->,>=triangle 90] (10, -5.5)  node[label=right:{\text{фиксинг $E_4^{3M}$}}]{} -- (4.5, -5.5) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_3^{3M} + 0.1\%}{4}$};
		\draw [snake=snake,->,>=triangle 90] (0, -7) node[label=left:{$12M$}]{} -- (4, -7) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot \dfrac{E_2^{6M}}{2}$};

		\draw [snake=snake,->,>=triangle 90] (10, -7) -- (4.5, -7) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \dfrac{E_4^{3M} + 0.1\%}{4}$};
\end{tikzpicture}

\justify
$0.1\%$ --- базис или цена свопа.
\end{frame}



\begin{frame}{Ставки овернайт}
\justify
Если даже депозит в банке по EURIBOR на 3 или 6 месяцев --- слишком рискованная инвестиция, как можно уменьшить риск? Можно размещать деньги не на квартал, а на день (точнее, на ночь). Придётся каждое утро следить за новостями и выбирать наиболее надёжный банк на следующие сутки, зато получится очень надёжно.

\justify
Под какую ставку мы сможем вкладывать деньги на день? Скорее всего --- близко к ESTER, средней ставке по депозитам овернайт в крупных банках.

\justify
Осталось только разобраться с процентным риском. Начиная цепочку депозитов сейчас, при ESTER $3.90\%$, мы не знаем, по какой ставке будем открывать вклады через год. Вдруг ставки упадут?
\end{frame}



\begin{frame}{Overnight index swap}
\justify
Своп на индекс овернайт (\en{overnight index swap, OIS}) --- контракт, в котором одна сторона платит фиксированную ставку, а другая --- <<среднюю>> ставку овернайт (например, ESTER) за период.

\justify
\centering
\begin{tikzpicture}[thick, scale=0.75]
		\draw (0, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания A} -- (0, -2.5);
		\draw (10.5, 0) node[rectangle,draw,rounded corners,anchor=south,minimum height=1cm] {Компания B} -- (10.5, -2.5);

		\draw [->,>=triangle 90] (0, -1) node[label=left:{1Y}]{} -- (5, -1) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot (2.55\%)$};

		\draw [snake=snake,->,>=triangle 90] (10.5, -1) -- (5.5, -1) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \overline{E_1}$};


		\draw [->,>=triangle 90] (0, -2.5) node[label=left:{2Y}]{} -- (5, -2.5) node[pos=0.5,anchor=south]{$\EUR{1\,000\,000} \cdot (2.55\%)$};

		\draw [snake=snake,->,>=triangle 90] (10.5, -2.5) -- (5.5, -2.5) node[pos=0.5,anchor=south] {$\EUR{1\,000\,000} \cdot \overline{E_2}$};
\end{tikzpicture}

\justify
$\overline{E_1}$ и $\overline{E_2}$ --- средние ставки ESTER ($e_i$) за первый и второй год:
\begin{align*}
\overline{E_1} &= \left(1 + \dfrac{e_1}{360}\right)
\left(1 + \dfrac{e_2}{360}\right)
...
\left(1 + \dfrac{e_{365}}{360}\right) - 1 \\
\overline{E_2} &= \left(1 + \dfrac{e_{366}}{360}\right)
\left(1 + \dfrac{e_{367}}{360}\right)...
\left(1 + \dfrac{e_{730}}{360}\right) - 1
\end{align*}

\justify
Фиксированная ставка $2.55\%$ --- цена свопа.
\end{frame}



\begin{frame}{Дисконтирование OIS}
\justify
Цепочка из однодневных депозитов под ESTER, в которой процентный риск захеджирован OIS свопом --- лучшее приближение теоретической безрисковой процентной ставки.

\justify
Текущий рыночный консенсус --- использовать дисконтирование по OIS для оценки деривативов.

\justify
Построение кривой процентных превращается в сложную задачу математической оптимизации с множеством входных данных:
\begin{itemize}
\item OIS свопы, чтобы вывести коэффициенты дисконтирования
\item Свопы и фьючерсы на 3M-EURIBOR, а также базисные свопы 3M-ESTER, чтобы вывести ожидаемые значения трёхмесячного EURIBOR.
\item Свопы на 6M-EURIBOR или базисные свопы 6M-3M, чтобы оценить будущие значения 6M-EURIBOR.
\end{itemize}
\end{frame}



\begin{frame}{Если всего этого мало}
\justify
Коэффициенты дисконтирования, которые нужно применять к платежам по сделке, зависят от соглашения о гарантийном обеспечении (\en{credit support annex, CSA}). Начисление процентов на гарантийное обеспечение по ставке овернайт --- стандартная рыночная практика. Поэтому дисконтирование по OIS работает довольно часто, не не всегда.

\justify
Кроме того, кривые OIS в двух валютах не воспроизводят цены форвардов, потому что не являются идеальными безрисковыми ставками. Существует валютный базис (\en{cross-currency basis}), который тоже нужно учитывать при оценке деривативов.

\justify
Подробности в \en{Marc Henrard, Interest Rate Modelling in the Multi-Curve Framework (2014)}.
\end{frame}



\begin{frame}{Бонус: LIBOR}
\justify
В 2023 году прекратила существование ставка LIBOR (\en{London Interbank Offered Rate}). Она определялась по результатам опроса панели банков. Каждый рабочий день банки-участники отвечали на следующий вопрос:

\justify
\en{At what rate could you borrow funds, were you to do so by asking for and then accepting inter-bank offers in a reasonable market size just prior to 11am London time?}

\justify
25\% ответов снизу и сверху отбрасываются. По оставшимся считается средняя арифметическая ставка.

\justify
Когда-то LIBOR считали для 10 валют и 15 различных сроков от овернайта до 1 года. В последние годы --- на 5 валют и 7 сроков.
\end{frame}



\begin{frame}{Бонус: LIBOR - 2}
\justify
Значения LIBOR на 11.10.2021 (базисные пункты):
\justify
\centering
\begin{tabular}{l|r|r|r|r|r}
Срок & CHF       & EUR       & GBP      & JPY      & USD \\ \hline
ON   & $-78.120$ & $-58.957$ & $4.025$  & $-9.883$ & $7.263$ \\
1W   & $-81.540$ & $-58.142$ & $4.425$  & $-8.400$ & $7.613$ \\
1M   & $-78.280$ & $-57.229$ & $6.413$  & $-7.050$ & $8.538$ \\
2M   & $-76.000$ & $-55.943$ & $9.175$  & $-5.050$ & $10.175$ \\
3M   & $-76.300$ & $-56.914$ & $11.363$ & $-7.933$ & $12.175$ \\
6M   & $-71.480$ & $-53.829$ & $24.325$ & $-4.483$ & $15.650$ \\
12M  & $-58.200$ & $-48.657$ & $51.938$ & $6.317$  & $25.663$
\end{tabular}
\end{frame}



\begin{frame}{Бонус: LIBOR - 3}
\justify
LIBOR --- результат экспертного опроса. Методология, вообще говоря, не требует, чтобы банки называли свои процентные ставки исходя из реально заключённых сделок.

\justify
В начале 2010-х выяснилось, что сотрудники нескольких банков вошли в сговор и заранее договаривались отправлять чуть заниженные или завышенные показания. Так банки манипулировали значением LIBOR и зарабатывали дополнительные деньги на процентных свопах, привязанных к LIBOR.

\justify
Итоги скандала: миллиардные штрафы, тюремные сроки, коренная реформа всего института референсных ставок.
\end{frame}



\begin{frame}{Бонус: LIBOR - 4}
\justify
Долларовый LIBOR уступил место новой ставке \alert{SOFR} (\en{Secured Overnight Funding Rate}). Это ставка однодневных кредитов под залог ценных бумаг. В отличие от LIBOR, этот индикатор усредняет реальные сделки на огромном рынке.

\justify
SOFR заменил LIBOR во всех контрактах. Там, где нужна была одна ставка трёхмесячного LIBOR, появиласья средняя ставка SOFR за три месяца (по аналогии с OIS свопами) плюс откалиброванная константа 0.26161\%.

\justify
Начиная с 01.01.2022 все новые контракты должны использовать SOFR, а не LIBOR. В последний раз LIBOR опубликовали 30.06.2023.
\end{frame}
\end{document}